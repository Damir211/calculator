(function(){"use strict";var e={1740:function(e,t,n){var a=n(9242),i=n(3396);function l(e,t,n,a,l,r){const o=(0,i.up)("auto-calculator");return(0,i.wg)(),(0,i.j4)(o)}var r=n(7139);const o={class:"calculator"},u=(0,i._)("h1",{class:"title"},"Рассчитайте стоимость автомобиля в лизинг",-1),s={class:"calculator__block calculator__block-result"},c=(0,i._)("div",{class:"calculator__title"},"Сумма договора лизинга",-1),d={class:"calculator__result"},m={class:"calculator__block calculator__block-result"},h=(0,i._)("div",{class:"calculator__title"},"Ежемесячный платеж от",-1),p={class:"calculator__result"},f={class:"calculator__block calculator__block-button"};function _(e,t,n,l,_,g){const v=(0,i.up)("app-input");return(0,i.wg)(),(0,i.iD)("div",o,[u,(0,i._)("form",{class:"calculator__form",onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>g.submitHandler&&g.submitHandler(...e)),["prevent"]))},[(0,i.Wm)(v,{title:"Стоимость автомобиля",placeholder:"₽",typeInput:"default",minValue:1e6,maxValue:6e6,currencyMask:!0,modelValue:_.car_coast,"onUpdate:modelValue":t[0]||(t[0]=e=>_.car_coast=e),class:(0,r.C_)({disabled:_.loading})},null,8,["modelValue","class"]),(0,i.Wm)(v,{title:"Первоначальный взнос",placeholder:"₽",firstPay:g.initail_payment,typeInput:"percent",minValue:10,maxValue:60,modelValue:_.initail_payment_percent,"onUpdate:modelValue":t[1]||(t[1]=e=>_.initail_payment_percent=e),class:(0,r.C_)({disabled:_.loading})},null,8,["firstPay","modelValue","class"]),(0,i.Wm)(v,{title:"Срок лизинга",placeholder:"мес.",typeInput:"default",minValue:1,maxValue:60,modelValue:_.lease_term,"onUpdate:modelValue":t[2]||(t[2]=e=>_.lease_term=e),class:(0,r.C_)({disabled:_.loading})},null,8,["placeholder","modelValue","class"]),(0,i._)("div",s,[c,(0,i._)("div",d,(0,r.zw)(g.total_sum?new Intl.NumberFormat("ru-RU").format(g.total_sum):0)+" ₽ ",1)]),(0,i._)("div",m,[h,(0,i._)("div",p,(0,r.zw)(isFinite(g.monthly_payment_from)?new Intl.NumberFormat("ru-RU").format(g.monthly_payment_from):0)+" ₽ ",1)]),(0,i._)("div",f,[(0,i._)("button",{type:"submit",class:(0,r.C_)(["calculator__button",{loading:_.loading}])}," Оставить заявку ",2)])],32)])}const g={class:"calculator__block calculator__block-input"},v={class:"calculator__title"},y={class:"input"},b=["value"],V=["value"],w={key:2,class:"input__info"},P={key:3,class:"input__info input__info-fill"},R=["value"],M=(0,i._)("span",null,"%",-1),H={class:"input__range",ref:"range"},k={class:"input__round",style:{left:"0"},ref:"rangeRound"},x={class:"input__line",ref:"rangeLine"};function L(e,t,n,a,l,o){return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("div",v,(0,r.zw)(n.title),1),(0,i._)("div",y,["default"===n.typeInput?((0,i.wg)(),(0,i.iD)("input",{key:0,class:"input__main",type:"text",inputmode:"numeric",value:o.formatedModalValue,onInput:t[0]||(t[0]=(...e)=>o.inputHandler&&o.inputHandler(...e)),onBlur:t[1]||(t[1]=(...e)=>o.blurHandler&&o.blurHandler(...e))},null,40,b)):"percent"===n.typeInput?((0,i.wg)(),(0,i.iD)("input",{key:1,class:"input__main",type:"text",value:o.formatedFirstPay,readonly:""},null,8,V)):(0,i.kq)("",!0),"default"===n.typeInput?((0,i.wg)(),(0,i.iD)("div",w,(0,r.zw)(n.placeholder),1)):"percent"===n.typeInput?((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("input",{class:"input__percent",type:"text",inputmode:"numeric",value:o.formatedModalValue,onInput:t[2]||(t[2]=(...e)=>o.inputHandler&&o.inputHandler(...e)),onBlur:t[3]||(t[3]=(...e)=>o.blurHandler&&o.blurHandler(...e))},null,40,R),M])):(0,i.kq)("",!0),(0,i._)("div",H,[(0,i._)("div",k,null,512),(0,i._)("div",x,null,512)],512)])])}var I={data(){return{rangeHandlers:[{startHandler:"mousedown",moveHandler:"mousemove",endHandler:"mouseup"},{startHandler:"touchstart",moveHandler:"touchmove",endHandler:"touchend"}],rangeInited:!1,rangeShiftX:0,rangePercentValue:0,rangeMaxLeftPosition:0,range:null,rangeLine:null,rangeRound:null}},methods:{onMouseMove(e){let t="undefined"!==typeof e.clientX?e.clientX:e.changedTouches[0].clientX,n=t-this.rangeShiftX-this.range.getBoundingClientRect().left;this.rangeMaxLeftPosition=100*(this.range.offsetWidth-this.rangeRound.offsetWidth)/this.range.offsetWidth,this.rangePercentValue=100*n/(this.range.offsetWidth-this.rangeRound.offsetWidth),this.rangePercentValue<0&&(this.rangePercentValue=0),this.rangePercentValue>100&&(this.rangePercentValue=100),this.updateRangePosition(this.rangePercentValue)},updateRangePosition(e){let t=e*this.rangeMaxLeftPosition/100;this.rangeRound.style.left=t+"%",this.rangeLine.style.width=t+"%"},desktopStartHandler(e){e.preventDefault(),this.rangeShiftX=(e.clientX?e.clientX:e.changedTouches[0].clientX)-this.rangeRound.getBoundingClientRect().left,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",(()=>{document.removeEventListener("mousemove",this.onMouseMove)}),{once:!0})},mobileStartHandler(e){e.preventDefault(),this.rangeShiftX=(e.clientX?e.clientX:e.changedTouches[0].clientX)-this.rangeRound.getBoundingClientRect().left,document.addEventListener("touchmove",this.onMouseMove),document.addEventListener("touchend",(()=>{document.removeEventListener("touchmove",this.onMouseMove)}),{once:!0})},setupRange(e,t,n){this.range=e,this.rangeLine=t,this.rangeRound=n,this.rangeInited=!0,this.rangeMaxLeftPosition=100*(this.range.offsetWidth-this.rangeRound.offsetWidth)/this.range.offsetWidth,this.rangeRound.addEventListener("mousedown",this.desktopStartHandler),this.rangeRound.addEventListener("touchstart",this.mobileStartHandler)},destroyRange(){this.rangeRound.removeEventListener("mousedown",this.desktopStartHandler),this.rangeRound.removeEventListener("touchstart",this.mobileStartHandler)}}},S={name:"AppInput",props:{title:{type:String},placeholder:{type:String,default:""},firstPay:{type:Number,default:0},modelValue:{type:Number},typeInput:{type:String,default:"default"},maxValue:{type:Number,default:0,required:!0},minValue:{type:Number,default:0},currencyMask:{type:Boolean,default:!0}},emits:["update:modelValue"],mixins:[I],methods:{inputHandler(e){let t=+e.target.value.replace(/[^0-9]/g,"");this.maxValue&&(t=t>this.maxValue?this.maxValue:t),this.modelValue===t?e.target.value=this.formatedModalValue:(this.$emit("update:modelValue",t),this.rangeInited&&this.updateRangePosition(this.inputValueToPercent(t)))},blurHandler(e){let t=+e.target.value.replace(/[^0-9]/g,"");this.minValue>t&&this.$emit("update:modelValue",this.minValue)},inputValueToPercent(e){let t=100*(e-this.minValue)/(this.maxValue-this.minValue);return t>=0?t:0},inputValueToNumeric(e){let t=(this.maxValue-this.minValue)*(Number.parseFloat(e.toFixed(1))/100)+this.minValue;return Math.round(t)}},computed:{formatedModalValue(){return this.currencyMask?new Intl.NumberFormat("ru-RU").format(this.modelValue):String(this.modelValue)},formatedFirstPay(){return new Intl.NumberFormat("ru-RU").format(this.firstPay)+this.placeholder}},watch:{rangePercentValue(e){this.$emit("update:modelValue",this.inputValueToNumeric(e))}},mounted(){this.setupRange(this.$refs.range,this.$refs.rangeLine,this.$refs.rangeRound),this.updateRangePosition(this.inputValueToPercent(this.modelValue))},beforeUnmount(){this.rangeInited&&this.destroyRange()}},N=n(89);const T=(0,N.Z)(S,[["render",L]]);var C=T;const O="https://hookb.in/eK160jgYJ6UlaRPldJ1P";function X(e){return fetch(O,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json()))}var j={name:"AutoCalculator",data(){return{car_coast:33e5,initail_payment_percent:13,lease_term:60,percent:.035,loading:!1}},computed:{initail_payment(){return Math.ceil(this.car_coast*(this.initail_payment_percent/100))},monthly_payment_from(){return Math.ceil((this.car_coast-this.initail_payment)*(this.percent*Math.pow(1+this.percent,this.lease_term)/(Math.pow(1+this.percent,this.lease_term)-1)))},total_sum(){return this.initail_payment+this.lease_term*this.monthly_payment_from}},components:{AppInput:C},methods:{submitHandler(){let e={car_coast:this.car_coast,initail_payment:this.initail_payment,initail_payment_percent:this.initail_payment_percent,lease_term:this.lease_term,total_sum:this.total_sum,monthly_payment_from:this.monthly_payment_from};this.loading=!0,X(e).then((e=>{this.loading=!1,this.$showNotif("Данные успешно отправлены")})).catch((e=>{this.loading=!1,this.$showNotif("Произошла ошибка")}))}}};const E=(0,N.Z)(j,[["render",_]]);var W=E,F={name:"App",components:{AutoCalculator:W}};const U=(0,N.Z)(F,[["render",l]]);var $=U;document.body.insertAdjacentHTML("beforeend",'<div class="notif" id="notif"></div>');const D=document.querySelector("#notif");var A={install(e,t){e.config.globalProperties.$showNotif=function(e){D.textContent=e,D.classList.add("active"),setTimeout((()=>{D.classList.remove("active")}),3e3)}}};const B=(0,a.ri)($);B.use(A),B.mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,l){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],l=e[c][2];for(var o=!0,u=0;u<a.length;u++)(!1&l||r>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(o=!1,l<r&&(r=l));if(o){e.splice(c--,1);var s=i();void 0!==s&&(t=s)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,i,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,r=a[0],o=a[1],u=a[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(u)var c=u(n)}for(t&&t(a);s<r.length;s++)l=r[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(c)},a=self["webpackChunkcalculator"]=self["webpackChunkcalculator"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(1740)}));a=n.O(a)})();
//# sourceMappingURL=app.70a7b3ad.js.map